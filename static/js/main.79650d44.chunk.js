(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(5),l=n.n(r),o=(n(13),n(7)),i=n(1),u=n(3),s=n.n(u),d=n(6),m=function(){var e=Object(d.a)(s.a.mark(function e(t,n){var a,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://mate-api.herokuapp.com").concat(t),n);case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Failed to load data ".concat(t));case 5:return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c.data||c);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){return m("/todos").then(function(e){return e.filter(function(e){return 1182===e.userId})})},p=function(e){return m("/todos/".concat(e),{method:"DELETE"})},b=function(e){var t=e.addTodo,n=Object(a.useState)(""),r=Object(i.a)(n,2),l=r[0],o=r[1];return c.a.createElement("form",{onSubmit:function(e){var n;e.preventDefault(),(n={userId:1182,title:l,completed:!1},m("/todos",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)})).then(t),o("")}},c.a.createElement("input",{type:"text",className:"new-todo",value:l,placeholder:"What needs to be done?",onChange:function(e){o(e.target.value)},required:!0}))},h=n(2),E=n.n(h),v=function(e){var t=e.todo,n=e.deleteItem,r=e.setStatus,l=e.setNewTitle,o=Object(a.useState)(t.completed),u=Object(i.a)(o,2),s=u[0],d=u[1],f=Object(a.useState)(!1),b=Object(i.a)(f,2),h=b[0],v=b[1],y=Object(a.useState)(t.title),j=Object(i.a)(y,2),O=j[0],g=j[1],N=Object(a.useRef)(null),k=function(e,t){var n,a;d(t.target.checked),(n=e,a=t.target.checked,m("/todos/".concat(n),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({completed:a})})).catch(function(){d(!t.target.checked)}),r(e,t.target.checked)};return c.a.createElement("li",{className:E()({completed:t.completed,editing:h})},c.a.createElement("div",{className:"view"},c.a.createElement("input",{type:"checkbox",className:"toggle",checked:s,onChange:function(e){return k(t.id,e)}}),c.a.createElement("label",null,t.title),c.a.createElement("button",{type:"button",className:"destroy",onClick:function(){return e=t.id,void p(e).then(function(e){return n(e.id)});var e}}),c.a.createElement("button",{type:"button",className:"editInput",title:"Edit title",onClick:function(){v(!0),setTimeout(function(){N.current.focus()})}})),c.a.createElement("form",{onSubmit:function(){v(!1),g(t.title),function(e,t){m("/todos/".concat(e),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:t})})}(t.id,O),l(t.id,O)}},c.a.createElement("input",{type:"text",className:"edit",value:O,onChange:function(e){g(e.target.value)},ref:N,onBlur:function(){return v(!1)}})))},y=function(e){var t=e.items,n=e.deleteItem,a=e.setStatus,r=e.setNewTitle,l=t.sort(function(e,t){return t.id-e.id});return c.a.createElement("ul",{className:"todo-list"},l.map(function(e){return c.a.createElement(v,{key:e.id,todo:e,deleteItem:n,setStatus:a,setNewTitle:r})}))};y.defaultProp={completed:!1,title:"No title"};var j=function(e){var t=e.selectedFilter,n=e.filterBy,a=e.text,r=e.filterTodos,l="all"===n?"#/":"#/".concat(n);return c.a.createElement("a",{href:l,className:E()({selected:n===t}),onClick:function(){return r(n)}},a)};var O=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],l=Object(a.useState)(""),u=Object(i.a)(l,2),s=u[0],d=u[1],m=Object(a.useState)("all"),h=Object(i.a)(m,2),E=h[0],v=h[1];Object(a.useEffect)(function(){f().then(r)},[]);var O=Object(a.useCallback)(function(e){switch(e){case"completed":return n.filter(function(e){return e.completed});case"active":return n.filter(function(e){return!e.completed});default:return n}},[n]),g=Object(a.useMemo)(function(){return O(E)},[E,O]);Object(a.useEffect)(function(){if(null!==n){var e=n.filter(function(e){return!e.completed}).length;d(e)}},[n]);var N=Object(a.useCallback)(function(e){r(function(t){return[].concat(Object(o.a)(t),[e])})},[]),k=Object(a.useCallback)(function(e){r(function(t){return t.filter(function(t){return t.id!==e})})},[]);return null===g?c.a.createElement("div",{className:"loading"},"Loading..."):c.a.createElement("section",{className:"todoapp"},c.a.createElement("header",{className:"header"},c.a.createElement("h1",null,"todos"),c.a.createElement(b,{addTodo:N})),c.a.createElement("section",{className:"main"},c.a.createElement("input",{type:"checkbox",id:"toggle-all",className:"toggle-all"}),c.a.createElement("label",{htmlFor:"toggle-all"},"Mark all as complete"),c.a.createElement(y,{items:g,deleteItem:k,setStatus:function(e,t){r(function(n){return n.map(function(n){return n.id===e&&(n.completed=t),n})})},setNewTitle:function(e,t){r(function(n){return n.map(function(n){return n.id===e&&(n.title=t),n})})}})),n.length>0&&c.a.createElement("footer",{className:"footer"},c.a.createElement("span",{className:"todo-count"},s," items left"),c.a.createElement("ul",{className:"filters"},c.a.createElement("li",null,c.a.createElement(j,{selectedFilter:E,filterBy:"all",text:"All",filterTodos:v})),c.a.createElement("li",null,c.a.createElement(j,{selectedFilter:E,filterBy:"active",text:"Active",filterTodos:v})),c.a.createElement("li",null,c.a.createElement(j,{selectedFilter:E,filterBy:"completed",text:"Completed",filterTodos:v}))),n.some(function(e){return e.completed})&&c.a.createElement("button",{type:"button",className:"clear-completed",onClick:function(){var e=n.filter(function(e){return e.completed}),t=!0,a=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var i=l.value;p(i.id)}}catch(u){a=!0,c=u}finally{try{t||null==o.return||o.return()}finally{if(a)throw c}}r(function(e){return e.filter(function(e){return!e.completed})})}},"Clear completed")))};l.a.render(c.a.createElement(O,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.79650d44.chunk.js.map